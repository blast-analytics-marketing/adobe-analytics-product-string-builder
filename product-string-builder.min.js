//Minimized BlastAM Product String Builder Code
//This code has been thoroughly tested, but you'll want to do your own testing. You take full responsibility for its use. -- BlastAM
Number.isNaN=Number.isNaN||function(t){return"number"==typeof t&&isNaN(t)},s.buildProducts=function(t){for(var e="";void 0!==(product=t.shift());)""!==product.totalQuantity&&""!=product.totalPrice?e+=";"+product.sku+";"+product.totalQuantity+";"+product.totalPrice:Object.keys(product.evars).length||Object.keys(product.events).length?e+=";"+product.sku+";;":e+=";"+product.sku,e+=buildMerchEvents(product.events),e+=buildMerchEvars(e,product.evars),0!=t.length&&(e+=",");return e},s.buildMerchEvents=function(t){var e=";",r=0;if(0==Object.keys(t).length)return"";for(key in t)r>0&&(e+="|"),e+=key+"="+t[key],r++;return e},s.buildMerchEvars=function(t,e){var r=";",i=0;if(t=t.toLowerCase(),0==Object.keys(e).length)return"";-1==t.indexOf("event")&&(r+=";");for(key in e)i>0&&(r+="|"),r+=key+"="+e[key],i++;return r},s.oProduct=function(t,e,r,i,n){this.sku=void 0!==t&&""!==t?t:"",this.totalQuantity=void 0!==e&&""!==e?e:"",this.totalPrice=void 0!==r&&""!==r?r:"",this.evars=void 0!==i&&""!==i?i:{},this.events=void 0!==n&&""!==n?n:{},this.add=function(t,e){void 0!=typeof e&&null!=e&&"undefined"!=e&&"null"!=e&&((t=t.toLowerCase()).indexOf("evar")>-1?this.evars[t]=e:t.indexOf("event")>-1&&(this.events[t]=e))}};